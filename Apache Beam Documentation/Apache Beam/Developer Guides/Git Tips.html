<p><div class="toc-macro client-side-toc-macro  conf-macro output-block" data-hasbody="false" data-headerelements="H1,H2,H3,H4,H5,H6,H7" data-macro-name="toc"> </div></p><h1 id="GitTips-GettingStarted">Getting Started</h1><p>To propose code changes, you should be familiar with the Git / Github workflow, including:</p><ul><li><a class="external-link" href="https://help.github.com/articles/fork-a-repo/" rel="nofollow">forking</a> the <a class="external-link" href="https://github.com/apache/beam" rel="nofollow">github.com/apache/beam</a> repo</li><li><a class="external-link" href="https://help.github.com/articles/cloning-a-repository/" rel="nofollow">cloning</a> your fork</li><li><a class="external-link" href="https://help.github.com/articles/syncing-a-fork/" rel="nofollow">syncing</a> your master branch with the upstream apache/beam repository</li><li><a class="external-link" href="https://help.github.com/articles/creating-and-deleting-branches-within-your-repository/" rel="nofollow">branching</a></li><li><a class="external-link" href="https://help.github.com/articles/about-git-rebase/" rel="nofollow">squashing</a> commits</li><li><a class="external-link" href="https://help.github.com/articles/proposing-changes-to-your-work-with-pull-requests/" rel="nofollow">proposing changes</a> in a pull request</li></ul><h2 id="GitTips-.gitconfig">.gitconfig</h2><p>Here's a convenient <a class="external-link" href="https://gist.github.com/Ardagan/ba6e76f4a0adebb485c3dd019d363d01" rel="nofollow">.git/config</a> file that shows how to:</p><ul><li>Set up branches</li><li>Limit fetched branches to master only</li><li>Fetch PRs from upstream</li><li>Configure alias to show a pretty formatted git log.</li></ul><p>If you have more simple and useful configs to add, feel free to comment on gist.</p><h1 id="GitTips-Howtocreateapullrequest">How to create a pull request</h1><p>To create a new pull request, follow the next steps:</p><ol><li><a class="external-link" href="https://help.github.com/articles/fork-a-repo/" rel="nofollow">Fork</a> the <a class="external-link" href="https://github.com/apache/beam" rel="nofollow">github.com/apache/beam</a> repo</li><li><p><a class="external-link" href="https://help.github.com/articles/cloning-a-repository/" rel="nofollow">Clone</a> your fork, for example:</p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ git clone git@github.com:${GITHUB_USERNAME}/beam
$ cd beam</pre>
</div></div><pre class="highlight"><code>
</code></pre></li><li><p>Add an upstream remote for apache/beam to allow syncing changes into your fork: </p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: applescript; gutter: false; theme: Default" data-theme="Default">$ git remote add upstream https://github.com/apache/beam</pre>
</div></div></li><li><p>Create a local branch for your changes: </p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ git checkout -b someBranch</pre>
</div></div><pre class="highlight"><code>
</code></pre></li><li>Make your code change.</li><li>Add unit tests for your change.</li><li>Ensure tests pass locally.</li><li><p>Commit your change including a <a class="external-link" href="https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue" rel="nofollow">reference</a> to the Github issue:</p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ git add &lt;new files&gt;
$ git -am &quot;Description of change (resolves #12345)&quot;</pre>
</div></div><pre class="highlight"><code>
</code></pre></li><li><p>Push your change to your forked repo </p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ git push --set-upstream origin YOUR_BRANCH_NAME</pre>
</div></div><pre class="highlight"><code>
</code></pre></li><li><p>Browse to the URL of your forked repository and propose a pull request.</p></li><li>Find a committer to review, and mention them by adding <code class="highlighter-rouge">R: @username</code> to the review comments</li></ol><p><br/></p><h1 id="GitTips-Howtocreateacherry-pickpullrequestforanongoingreleasebranch">How to create a cherry-pick pull request for an ongoing release branch</h1><p>To create a new cherry-pick full request, follow these steps:</p><ol><li>Make a pull-request with changes to the master branch first,  have it reviewed and merged. As an example, we assume your PR is <a class="external-link" href="https://github.com/apache/beam/pull/25000" rel="nofollow">https://github.com/apache/beam/pull/25000</a> and you would like to cherry-pick it to Beam 2.56.0 release branch.  We normally only cherry-pick already merged changes to the release branch.</li><li><p class="auto-cursor-target">If you already have a clone of Beam's main repo, fetch recent release branches:</p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ cd beam
$ git fetch origin</pre>
</div></div><pre class="highlight auto-cursor-target"><br/>Otherwise, make a clone of the main repo (not your fork of Beam), and add a remote for your fork:</pre><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ git clone https://github.com/apache/beam.git  
$ cd beam
$ git remote add ${GITHUB_USERNAME} git@github.com:${GITHUB_USERNAME}/beam.git

</pre>
</div></div></li><li><p class="auto-cursor-target">In a local clone of a Beam repo, start a new branch. However, instead of basing your branch on top of master, branch off the release branch. For example:</p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ git checkout origin/release-2.56.0
$ git checkout -b cherrypick_pr_25000</pre>
</div></div><pre class="highlight"><code><br/></code></pre><p>Find from Github UI the commit IDs of  your merged PR, that you need to cherry-pick. For example, going to <a class="external-link" href="https://github.com/apache/beam/pull/25000" rel="nofollow">https://github.com/apache/beam/pull/25000</a>, we can  find a commit 2d25d74bdcab3ba1ec03ca3cb14f0afc0cef1d00. Then, cherry-pick the commit in the new branch </p><p><br/></p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: applescript; gutter: false; theme: Default" data-theme="Default">$ git cherry-pick 2d25d74bdcab3ba1ec03ca3cb14f0afc0cef1d00</pre>
</div></div><p class="auto-cursor-target"><br/><strong>Alternatively</strong>, if you have an existing branch with your changes, and you are familiar with <a class="external-link" href="https://docs.github.com/en/get-started/using-git/about-git-rebase" rel="nofollow">git rebase flow</a> (or would like to learn it - it's very useful!), you can rebase your existing branch on top of Beam release branch, and <code>drop</code>   all commits except for the commits that you need to cherry-pick. To perform a rebase,  run: <br/>      <code>git pull --rebase=interactive origin release-2.56.0</code>    <br/><br/><br/></p></li><li><p>Push the branch with cherry-picked commits to your fork: </p><div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false; theme: Default" data-theme="Default">$ git push ${GITHUB_USERNAME} cherrypick_pr_25000</pre>
</div></div><pre class="highlight"><code>
</code></pre></li><li>Go to github UI, and create a pull request from the branch on your fork. <strong>When selecting the Apache Beam base branch, select the correct release branch.</strong> <br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" draggable="false" src="https://screenshot.googleplex.com/45sajVe3m5PPxKD.png" data-image-src="https://screenshot.googleplex.com/45sajVe3m5PPxKD.png"></span><br/><br/>You might be able to use a link like <a class="external-link" href="https://github.com/apache/beam/compare/release-2.56.0...github_username:cherrypick_pr_25000" rel="nofollow">https://github.com/apache/beam/compare/release-2.56.0...github_username:cherrypick_pr_25000</a> to get to the right page in the UI. Change your username and branch name appropriately.</li><li>Name your PR to be clear that this is a cherry-pick, and reference the cherry-picked PR. For example: [release-2.56.0] Cherrypick PR #25000 to the release branch. For example: <a class="external-link" href="https://github.com/apache/beam/pull/31598" rel="nofollow">https://github.com/apache/beam/pull/31598</a></li><li>Send your PR to the current Beam release manager for review.</li></ol><p><br/></p>