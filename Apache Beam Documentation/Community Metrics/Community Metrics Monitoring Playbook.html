<p>This page describes how to monitor for and respond to issues with the <a class="external-link" href="https://s.apache.org/beam-community-metrics" rel="nofollow">Beam Community Metrics</a> infrastructure.</p><h1 id="CommunityMetricsMonitoringPlaybook-MonitoringAutomation">Monitoring Automation</h1><p>A Jenkins job,Â <a class="external-link" href="https://ci-beam.apache.org/job/beam_Prober_CommunityMetrics/" rel="nofollow">beam_Prober_CommunityMetrics</a>, is configured to run every six hours to probe the Grafana frontend for health checks, <a class="external-link" href="https://github.com/apache/beam/blob/master/.test-infra/metrics/src/test/groovy/ProberTests.groovy" rel="nofollow">defined here</a>. The tests will ensure that the Grafana endpoint is up, has dashboards loaded, and will check that imported data from each of the input sources is not stale. The data freshness check checks the status of a Grafana alert on the <a class="external-link" href="http://104.154.241.245/d/data-freshness/source-data-freshness?orgId=1" rel="nofollow">Source Data Freshness</a> dashboard, which can be manually inspected.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" draggable="false" height="400" src="https://screenshot.googleplex.com/12q5uj3RPJR.png" data-image-src="https://screenshot.googleplex.com/12q5uj3RPJR.png"></span></p><h2 id="CommunityMetricsMonitoringPlaybook-Whattodoifthemonitoringisfailing?">What to do if the monitoring is failing?</h2><p>If the Jenkins job fails and it appears to be a real issue, please <a class="external-link" href="https://github.com/apache/beam/issues/new?assignees=octocat&amp;labels=bug%2Cawaiting+triage&amp;template=bug.yml&amp;title=%5BBug%5D%3A+" rel="nofollow">file an issue</a> and assigned it to someone from the <a class="external-link" href="https://github.com/apache/beam/blob/master/.test-infra/metrics/OWNERS" rel="nofollow">OWNERS file</a>.</p><p><br/></p><p><em>TODO: Add specific failure scenarios and recovery steps once we've seen some errors occur.</em></p>